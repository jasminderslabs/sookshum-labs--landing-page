---
import TestimonialCard from "./testimonialCard.astro";
const cards = [
  {
    name: "John Mark",
    title: "CEO of Facebook",
    review: `Lorem ipsum dolor sit amet, consectetur adipisicing elit. Culpa deleniti
    obcaec temporibus autem alias ratione ducimus, minus, consectetur
    adipisicing elit.`,
  },
  {
    name: "John Mark",
    title: "CEO of Facebook",
    review: `Lorem ipsum dolor sit amet, consectetur adipisicing elit. Culpa deleniti
    obcaec height='28'ati, temporibus autem alias ratione ducimus, minus, consectetur
    adipisicing elit.  reprehenderit distinctio ipsum. Laboriosam ad ea ut doloremque
    corrupti sapiente magnam veniam! Lorem ipsum dolor sit amet, consectetur
    adipisicing elit.`,
  },
  {
    name: "John Mark",
    title: "CEO of Facebook",
    review: `Lorem ipsum dolor sit amet, consectetur adipisicing elit. Culpa deleniti
    obcaec height='28'ati, temporibus autem alias ratione ducimus, minus, consectetur
    adipisicing elit.`,
  },
  {
    name: "John Mark",
    title: "CEO of Facebook",
    review: `Lorem ipsum dolor sit amet, consectetur adipisicing elit. Culpa deleniti
    obcaec height='28'ati, temporibus autem alias ratione ducimus, minus, consectetur
    adipisicing elit.`,
  },
  {
    name: "John Mark",
    title: "CEO of Facebook",
    review: `Lorem ipsum dolor sit amet, consectetur adipisicing elit. Culpa deleniti
    obcaec height='28'ati, temporibus autem alias ratione ducimus, minus, consectetur
    adipisicing elit.`,
  },
  {
    name: "John Mark",
    title: "CEO of Facebook",
    review: `Lorem ipsum dolor sit amet, consectetur adipisicing elit. Culpa deleniti
    obcaec height='28'ati, temporibus autem alias ratione ducimus, minus, consectetur
    adipisicing elit.`,
  },
  {
    name: "John Mark",
    title: "CEO of Facebook",
    review: `Lorem ipsum dolor sit amet, consectetur adipisicing elit. Culpa deleniti
    obcaec height='28'ati, temporibus autem alias ratione ducimus, minus, consectetur
    adipisicing elit.`,
  },
];
---

<section class='flex flex-col items-center gap-16 max-w-480 mx-auto my-20'>
  <div
    class='flex flex-col justify-between gap-5 items-center text-white w-[90%] md:w-[70%] lg:w-[40%]'
  >
    <button
      class='bg-[#282828B8] cursor-pointer opacity-70 text-white rounded-full w-fit py-3 px-8 mt-4 border-[0.5px] border-[#282828B2] font-bold'
    >
      Testimonials
    </button>
    <h2 class='font-semibold text-3xl md:text-5xl text-center'>
      There are reason people are <i class='font-light'>raving</i> about us.
    </h2>
    <p class='text-center text-lg opacity-70'>
      Don't just take our word for it. Explore what our satisfied clients have
      to say about their experience working with our agency.
    </p>
  </div>
  <div class='relative w-[90%] mx-20'>
    <div class='flex overflow-auto no-scrollbar gap-5 endless-scroll'>
      {
        cards.map((data) => {
          return <TestimonialCard {...data} />;
        })
      }
    </div>
    <span class='left-blur w-[25%] pointer-events-none'></span>
    <span class='right-blur w-[25%] pointer-events-none'></span>
  </div>
</section>
<style>
  .left-blur {
    position: absolute;
    left: -10px;
    top: 0;
    bottom: 0;
    height: 100%;

    opacity: 100%;
    filter: blur(10px);
    background: linear-gradient(90deg, black, transparent);
    z-index: 10;
  }
  .right-blur {
    position: absolute;
    right: -10px;
    top: 0;
    bottom: 0;
    height: 100%;

    opacity: 100%;
    filter: blur(10px);
    background: linear-gradient(90deg, transparent, black);
    z-index: 10;
  }
</style>

<script>
  const scrollbar = document.querySelector(".endless-scroll");

  scrollbar?.addEventListener("scroll", (e: any) => {
    if (e?.target?.scrollLeft === 0) {
      e?.target?.scrollTo({
        left: 2000,
        top: 0,
      });
    } else if (e?.target?.scrollLeft > 2000) {
      e?.target?.scrollTo({
        left: 10,
        top: 0,
      });
    }
  });

  function autoScroll() {
    scrollbar?.scrollBy(2, 0);

    requestAnimationFrame(autoScroll);
  }

  requestAnimationFrame(autoScroll);
</script>
